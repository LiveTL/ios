default_platform(:ios)

platform :ios do

  desc "Push a new release build to the App Store"
  lane :release do
    match(type: "development")
    #cert
    #sigh

    increment_build_number(xcodeproj: "ios.xcodeproj")

    update_code_signing_settings(
      use_automatic_signing: false,
      path: "ios.xcodeproj"
    )
    build_app(
      workspace: "ios.xcworkspace",
      scheme: "ios",
    )
    update_code_signing_settings(
      use_automatic_signing: true,
      path: "ios.xcodeproj"
    )

    upload_to_testflight
  end
end
